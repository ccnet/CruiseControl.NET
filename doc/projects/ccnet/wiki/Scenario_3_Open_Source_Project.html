<!doctype html>
<html lang="en">

<!-- Mirrored from www.cruisecontrolnet.org/projects/ccnet/wiki/Scenario_3_Open_Source_Project by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 26 May 2014 07:54:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<title>CruiseControl.NET - Scenario 3 Open Source Project - CruiseControl.NET</title>
<meta name="description" content="ChiliProject" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="EDpkCORIrV4IVlbMUhZw1q31U6s83FIHTf3lU59lLtI="/>
<link rel='shortcut icon' href='http://www.cruisecontrolnet.org/favicon.ico?1360787056' />
<link href="../../../stylesheets/reseta77a.css?1360787056" media="all" rel="stylesheet" type="text/css" />
<link href="../../../stylesheets/smoothness/jquery-uia77a.css?1360787056" media="all" rel="stylesheet" type="text/css" />
<link href="../../../stylesheets/applicationa77a.css?1360787056" media="all" rel="stylesheet" type="text/css" />
<link href="../../../stylesheets/printa77a.css?1360787056" media="print" rel="stylesheet" type="text/css" />

<!--[if lte IE 6]><link href="/stylesheets/ie6.css?1360787056" media="all" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 7]><link href="/stylesheets/ie7.css?1360787056" media="all" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if gte IE 8]><![endif]-->

<script src="../../../javascripts/jquery.mina77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/jquery-ui.mina77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/jquery.menu_expanda77a.js?1360787056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
jQuery.noConflict();
//]]>
</script>
<script src="../../../javascripts/modernizr.mina77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/prototypea77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/effectsa77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/dragdropa77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/controlsa77a.js?1360787056" type="text/javascript"></script>
<script src="../../../javascripts/applicationa77a.js?1360787056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script><script type="text/javascript">
//<![CDATA[
var datepickerSettings = {showOn: 'both', buttonImage: '/images/calendar.png?1360787056', buttonImageOnly: true, showButtonPanel: true, dateFormat: 'yy-mm-dd' }
//]]>
</script>
<link href="../../../stylesheets/jstoolbara77a.css?1360787056" media="screen" rel="stylesheet" type="text/css" />


<link href="../../../plugin_assets/redmine_ads/stylesheets/redmine_adsb58c.css?1361628765" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->

  <link href="../../../stylesheets/scma77a.css?1360787056" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://www.cruisecontrolnet.org/projects/ccnet/activity.atom?show_wiki_edits=1" rel="alternate" title="ATOM" type="application/atom+xml" />
<script src="../../../javascripts/jstoolbar/jstoolbara77a.js?1360787056" type="text/javascript"></script><script src="../../../javascripts/jstoolbar/textilea77a.js?1360787056" type="text/javascript"></script><script src="../../../javascripts/jstoolbar/lang/jstoolbar-ena77a.js?1360787056" type="text/javascript"></script><link href="../../../stylesheets/jstoolbara77a.css?1360787056" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="project-1 controller-wiki action-show">
<div id="wrapper">
  <div id="top-menu">
    <div id="header">
      <div id="logo"><a href="http://www.cruisecontrolnet.org/">CruiseControl.NET</a></div>
      <div id="top-menu-items">
      
      <div id="search">
                <label class="hidden-for-sighted" for="q">Search</label>
        <form action="http://www.cruisecontrolnet.org/search/index/ccnet" method="get">
          <input name="wiki_pages" type="hidden" value="1" />
          <input accesskey="f" class="search_field" id="q" name="q" placeholder="search ..." size="20" type="text" />
        </form>

      </div>
      

      <ul id="account-nav">
        
        
            <li><a href="http://www.cruisecontrolnet.org/" class="home">Home</a></li>
        
        <li class="drop-down">
          <a href="http://www.cruisecontrolnet.org/projects" class="projects">Projects</a>
          <ul style="display:none;">
            <li><a href="http://www.cruisecontrolnet.org/projects" class="projects separator">All Projects</a></li>
            
            
          </ul>
        </li>
        
        <li><a href="https://www.chiliproject.org/help/v3" class="help">?</a></li>
        
          
            
            <li>
              <a href="http://www.cruisecontrolnet.org/account/register">Register</a>
            </li>
            
            <li id="login-menu" class="drop-down last-child">
              <a href="http://www.cruisecontrolnet.org/login" class="login">Sign in</a>
              <div id="nav-login" style="display:none;">
                <div id="nav-login-content">
  <form action="http://www.cruisecontrolnet.org/login" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="EDpkCORIrV4IVlbMUhZw1q31U6s83FIHTf3lU59lLtI=" /></div>
    <input name="back_url" type="hidden" value="http%3A%2F%2Fwww.cruisecontrolnet.org%2Fprojects%2Fccnet%2Fwiki%2FScenario_3_Open_Source_Project" />
    <table>
      <tr>
        <td><label for="username-pulldown">Login</label></td>
        <td><label for="password-pulldown">Password</label></td>
        <td></td>
      </tr>
      <tr>
        <td><input id="username-pulldown" name="username" tabindex="1" type="text" /></td>
        <td><input id="password-pulldown" name="password" tabindex="1" type="password" /></td>
        <td><input type="submit" name="login" value="Login" tabindex="1"/></td>
      </tr>
    </table>
    <div id = "optional_login_fields" style = "top = 10px; white-space:nowrap">
      
        <input id="openid_url" name="openid_url" placeholder="OpenID URL" tabindex="1" type="text" />
      

      
        <label for="autologin"><input id="autologin" name="autologin" tabindex="1" type="checkbox" value="1" /> Stay logged in</label>
      

      
        <a href="http://www.cruisecontrolnet.org/account/lost_password" tabindex="1">Lost password</a>
      

      
        |
         <a href="http://www.cruisecontrolnet.org/account/register" tabindex="1">Register</a>
      
    </div>
  </form>
</div>

              </div>
            </li>
          
      </ul>
    </div>
    </div>
    <div id="breadcrumb">
      CruiseControl.NET
    </div>
  </div>

  
  
  
  
  <div id="main" class="">
    
      <div id="side-container">
        <div id="main-menu">
          <ul><li><a href="http://www.cruisecontrolnet.org/projects/ccnet" class="overview">Overview</a></li>
<li><a href="http://www.cruisecontrolnet.org/projects/ccnet/activity" class="activity">Activity</a></li>
<li>
<a href="http://www.cruisecontrolnet.org/projects/ccnet/roadmap" class="roadmap">Roadmap</a>
<ul class="menu-children unattached"><li><a href="../versions/5.html" class="version-5">1.9</a></li></ul>
</li>
<li>
<a href="http://www.cruisecontrolnet.org/projects/ccnet/issues" class="issues">Issues</a>
<ul class="menu-children"><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/issues/new" accesskey="7" class="new-issue">New issue</a></li><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/issues?set_filter=1" class="all-open-issues">View all open issues</a></li><li><a href="http://www.cruisecontrolnet.org/queries/new?project_id=ccnet" class="new-query">New saved query</a></li><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/issues/report" class="issue-summary">Issue summary</a></li></ul>
</li>
<li>
<a href="http://www.cruisecontrolnet.org/projects/ccnet/time_entries" class="time-entries">Time entries</a>
<ul class="menu-children"><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/time_entries/new" class="new-time-entry">New time entry</a></li><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/time_entries/report" class="time-entry-report">Time entry report</a></li></ul>
</li>
<li><a href="http://www.cruisecontrolnet.org/projects/ccnet/issues/gantt" class="gantt">Gantt</a></li>
<li><a href="http://www.cruisecontrolnet.org/projects/ccnet/issues/calendar" class="calendar">Calendar</a></li>
<li>
<a href="http://www.cruisecontrolnet.org/projects/ccnet/news" class="news">News</a>
<ul class="menu-children"><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/news/new" class="new-news">Add news</a></li></ul>
</li>
<li>
<a href="../documents.html" class="documents">Documents</a>
<ul class="menu-children"><li><a href="http://www.cruisecontrolnet.org/login?back_url=http%3A%2F%2Fwww.cruisecontrolnet.org%2Fprojects%2Fccnet%2Fdocuments%2Fnew" class="new-document">New document</a></li></ul>
</li>
<li>
<a href="../wiki.html" class="wiki selected">Wiki</a>
<ul class="menu-children"><li><a href="index.html" class="wiki-by-title">Index by title</a></li><li><a href="date_index.html" class="wiki-by-date">Index by date</a></li></ul>
</li>
<li>
<a href="http://www.cruisecontrolnet.org/projects/ccnet/boards" class="boards">Forums</a>
<ul class="menu-children"><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/boards/new" class="new-board">New forum</a></li></ul>
<ul class="menu-children unattached"><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/boards/1" class="board-1">General Discussion</a></li><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/boards/2" class="board-2">Help</a></li><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/boards/3" class="board-3">Coding</a></li></ul>
</li>
<li>
<a href="http://www.cruisecontrolnet.org/projects/ccnet/files" class="files">Files</a>
<ul class="menu-children"><li><a href="http://www.cruisecontrolnet.org/projects/ccnet/files/new" class="new-file">New file</a></li></ul>
</li>
<li><a href="http://www.cruisecontrolnet.org/projects/ccnet/repository" class="repository">Repository</a></li></ul>
          
        </div>

      
        <!-- Sidebar -->
        <div id="sidebar">
          
  
<h3>Wiki</h3>

<a href="../wiki.html">Start page</a><br />
<a href="index.html">Index by title</a><br />
<a href="date_index.html">Index by date</a><br />


  


          <div class="redmine_ads"><script type="text/javascript">
window.google_analytics_uacct = "UA-371146-15";
</script>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8921736128672887";
/* www.cruisecontrolnet.org */
google_ad_slot = "1762967545";
google_ad_width = 120;
google_ad_height = 240;
//-->
</script>
<script type="text/javascript"
src="../../../pagead/f.txt">
</script></div>
        </div>
      
      </div>

      <script type="text/javascript">
//<![CDATA[
jQuery.menu_expand({ menuItem: '.wiki' });
//]]>
</script>
    
    <div class="" id="content">
      
      <div class="contextual">









<a href="http://www.cruisecontrolnet.org/projects/ccnet/wiki/Scenario_3_Open_Source_Project/history" class="icon icon-history">History</a>
</div>

<p class="breadcrumb"><a href="Wiki.html">Wiki</a> &#187; <a href="Configuration.html">Configuration</a> &#187; <a href="Scenarios.html">Scenarios</a> &#187; <a href="Security_scenarios.html">Security scenarios</a> &#187; </p>



<div class="wiki">
  <a name="Scenario-3-Open-Source-Project"></a>
<h1 >Scenario 3: Open Source Project<a href="#Scenario-3-Open-Source-Project" class="wiki-anchor">&para;</a></h1>


	<a name="Background"></a>
<h2 >Background<a href="#Background" class="wiki-anchor">&para;</a></h2>


	<p>Petros has been working on an open source project called Midas for about a year now. This project is hosted on SourceForge, and he is the only administrator. However recently it's been getting some press and other people have volunteered to help, which he thinks is wonderful\!</p>


	<p>He has convinced his work (a chemical conversion company) to host a CruiseControl.Net instance for the community to use. However, he doesn't want to allow everybody full access to the server. He is happy to let everybody view the current status, but he only wants to let approved developers force build. He doesn't want to let anybody stop or start the projects. Finally he wants to know who performs any release builds.</p>


	<a name="The-Build-Setup"></a>
<h2 >The Build Setup<a href="#The-Build-Setup" class="wiki-anchor">&para;</a></h2>


	<p>Petros's build setup is really simple - there is only two projects in his config.</p>


	<p>The first project is a CI build - it polls every five minutes and performs a build if any changes are detected. This does the standard compile, run unit tests and generate installer. The outputs are stored in a publically accessible location.</p>


	<p>The second project is a releasing build. Again it does the compile, unit tests, etc, except this time in release mode. The outputs are then stored on his open source website and a release post is added to tell the world. This project must be manually forced.</p>


	<a name="The-Goals"></a>
<h2 >The Goals<a href="#The-Goals" class="wiki-anchor">&para;</a></h2>


	<p>Since Petros has full access to the server and is the only person who needs access, there will be only one security zone.</p>


	<p>This security zone will grant approved developers access to force or abort a build on the project. Currently security does not prevent viewing the reports, so this will not require configuration.</p>


	<p>To keep things simple, all force builds will be audited.</p>


	<a name="The-Plan"></a>
<h2 >The Plan<a href="#The-Plan" class="wiki-anchor">&para;</a></h2>


	<p>There will be only one security group - CanBuild. This group will have force build access to both projects, but no other access.</p>


	<p>All developers who need force build rights will be manually added to this group.</p>


	<a name="The-Configuration"></a>
<h2 >The Configuration<a href="#The-Configuration" class="wiki-anchor">&para;</a></h2>


	<p>The full configuration is as follows:</p>


<pre><code class="xml syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="tag">&lt;cruisecontrol&gt;</span>
<span class="line-numbers"> 2</span>  <span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Open_Source(Build)</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 3</span>    <span class="tag">&lt;workingDirectory&gt;</span>C:\Build\OSB<span class="tag">&lt;/workingDirectory&gt;</span>
<span class="line-numbers"> 4</span>    <span class="tag">&lt;artifactDirectory&gt;</span>C:\Build\OSB\Deploy<span class="tag">&lt;/artifactDirectory&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;webURL&gt;</span>http://localhost/server/local/project/LAS-Main/ViewProjectReport.aspx<span class="tag">&lt;/webURL&gt;</span>
<span class="line-numbers"> 6</span>    <span class="comment">&lt;!-- Source control block defined here --&gt;</span>
<span class="line-numbers"> 7</span>    <span class="tag">&lt;triggers&gt;</span>
<span class="line-numbers"> 8</span>      <span class="tag">&lt;intervalTrigger</span> <span class="attribute-name">buildCondition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">IfModificationExists</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">seconds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">300</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 9</span>    <span class="tag">&lt;/triggers&gt;</span>
<span class="line-numbers"><strong>10</strong></span>    <span class="tag">&lt;tasks&gt;</span>
<span class="line-numbers">11</span>      <span class="comment">&lt;!-- Tasks defined here --&gt;</span>
<span class="line-numbers">12</span>    <span class="tag">&lt;/tasks&gt;</span>
<span class="line-numbers">13</span>    <span class="tag">&lt;publishers&gt;</span>
<span class="line-numbers">14</span>      <span class="comment">&lt;!-- Publishers defined here --&gt;</span>
<span class="line-numbers">15</span>      <span class="tag">&lt;xmllogger</span><span class="tag">/&gt;</span>
<span class="line-numbers">16</span>    <span class="tag">&lt;/publishers&gt;</span>
<span class="line-numbers">17</span>  <span class="tag">&lt;/project&gt;</span>
<span class="line-numbers">18</span>  <span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Open_Source(Deploy)</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">19</span>    <span class="tag">&lt;workingDirectory&gt;</span>C:\Build\OSD<span class="tag">&lt;/workingDirectory&gt;</span>
<span class="line-numbers"><strong>20</strong></span>    <span class="tag">&lt;artifactDirectory&gt;</span>C:\Build\OSD\Deploy<span class="tag">&lt;/artifactDirectory&gt;</span>
<span class="line-numbers">21</span>    <span class="tag">&lt;webURL&gt;</span>http://localhost/server/local/project/LAS-Main/ViewProjectReport.aspx<span class="tag">&lt;/webURL&gt;</span>
<span class="line-numbers">22</span>    <span class="comment">&lt;!-- Source control block defined here --&gt;</span>
<span class="line-numbers">23</span>    <span class="tag">&lt;triggers</span> <span class="tag">/&gt;</span>
<span class="line-numbers">24</span>    <span class="tag">&lt;tasks&gt;</span>
<span class="line-numbers">25</span>      <span class="comment">&lt;!-- Tasks defined here --&gt;</span>
<span class="line-numbers">26</span>    <span class="tag">&lt;/tasks&gt;</span>
<span class="line-numbers">27</span>    <span class="tag">&lt;publishers&gt;</span>
<span class="line-numbers">28</span>      <span class="comment">&lt;!-- Publishers defined here --&gt;</span>
<span class="line-numbers">29</span>      <span class="tag">&lt;xmllogger</span><span class="tag">/&gt;</span>
<span class="line-numbers"><strong>30</strong></span>    <span class="tag">&lt;/publishers&gt;</span>
<span class="line-numbers">31</span>  <span class="tag">&lt;/project&gt;</span>
<span class="line-numbers">32</span><span class="tag">&lt;/cruisecontrol&gt;</span>
</span></code></pre>

	<p>Again the first step is turning on security - just added the internalSecurity element, plus the users and permissions children.</p>


	<a name="Adding-Some-Roles-and-Users"></a>
<h2 >Adding Some Roles and Users<a href="#Adding-Some-Roles-and-Users" class="wiki-anchor">&para;</a></h2>


	<p>Now the security has been added the next step is to add the users and the CanBuild security group. Since this is an open source project, Petros doesn't want to bother with much security. Therefore each person who is allowed to build has been added as a password user. At the moment, this is only Petros himself:</p>


<pre><code class="xml syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;internalSecurity&gt;</span>
<span class="line-numbers">2</span>  <span class="tag">&lt;users&gt;</span>
<span class="line-numbers">3</span>      <span class="tag">&lt;passwordUser</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">petros</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">whoareyou</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">4</span>  <span class="tag">&lt;/users&gt;</span>
<span class="line-numbers">5</span>  <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers">6</span>  <span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers">7</span><span class="tag">&lt;/internalSecurity&gt;</span>
</span></code></pre>

	<p>Note there is a domain in here - I've just changed it to localhost for this example. Without the domain the active directory authentication will fail as the authenticator won't know where to look.</p>


	<p>I've also added a server-level permission for the high-security permissions:</p>


<pre><code class="xml syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="tag">&lt;internalSecurity&gt;</span>
<span class="line-numbers"> 2</span>  <span class="tag">&lt;users&gt;</span>
<span class="line-numbers"> 3</span>      <span class="tag">&lt;passwordUser</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">petros</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">whoareyou</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 4</span>  <span class="tag">&lt;/users&gt;</span>
<span class="line-numbers"> 5</span>  <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers"> 6</span>  <span class="tag">&lt;rolePermission</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">defaultRight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Deny</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">forceBuild</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Allow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 7</span>    <span class="tag">&lt;users&gt;</span>
<span class="line-numbers"> 8</span>      <span class="tag">&lt;userName</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">petros</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 9</span>    <span class="tag">&lt;/users&gt;</span>
<span class="line-numbers"><strong>10</strong></span>  <span class="tag">&lt;/rolePermission&gt;</span>
<span class="line-numbers">11</span><span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers">12</span><span class="tag">&lt;/internalSecurity&gt;</span>
</span></code></pre>

	<p>I've also set the default right on the internal security element to Deny, so everyone else will be unable to do a force build.</p>


	<a name="Locking-Down-Projects"></a>
<h2 >Locking Down Projects<a href="#Locking-Down-Projects" class="wiki-anchor">&para;</a></h2>


	<p>The final step for preventing force builds is to secure the projects. This is the same configuration as previous:</p>


<pre><code class="xml syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Open_Source(Build)</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>  <span class="tag">&lt;workingDirectory&gt;</span>C:\Build\OSB<span class="tag">&lt;/workingDirectory&gt;</span>
<span class="line-numbers"> 3</span>  <span class="tag">&lt;artifactDirectory&gt;</span>C:\Build\OSB\Deploy<span class="tag">&lt;/artifactDirectory&gt;</span>
<span class="line-numbers"> 4</span>  <span class="tag">&lt;webURL&gt;</span>http://localhost/server/local/project/LAS-Main/ViewProjectReport.aspx<span class="tag">&lt;/webURL&gt;</span>
<span class="line-numbers"> 5</span>  <span class="comment">&lt;!-- Source control block defined here --&gt;</span>
<span class="line-numbers"> 6</span>  <span class="tag">&lt;triggers&gt;</span>
<span class="line-numbers"> 7</span>    <span class="tag">&lt;intervalTrigger</span> <span class="attribute-name">buildCondition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">IfModificationExists</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">seconds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">300</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 8</span>  <span class="tag">&lt;/triggers&gt;</span>
<span class="line-numbers"> 9</span>  <span class="tag">&lt;tasks&gt;</span>
<span class="line-numbers"><strong>10</strong></span>    <span class="comment">&lt;!-- Tasks defined here --&gt;</span>
<span class="line-numbers">11</span>  <span class="tag">&lt;/tasks&gt;</span>
<span class="line-numbers">12</span>  <span class="tag">&lt;publishers&gt;</span>
<span class="line-numbers">13</span>    <span class="comment">&lt;!-- Publishers defined here --&gt;</span>
<span class="line-numbers">14</span>    <span class="tag">&lt;xmllogger</span><span class="tag">/&gt;</span>
<span class="line-numbers">15</span>  <span class="tag">&lt;/publishers&gt;</span>
<span class="line-numbers">16</span>  <span class="tag">&lt;security</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultProjectSecurity</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">17</span>    <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers">18</span>      <span class="tag">&lt;rolePermission</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">19</span>    <span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers"><strong>20</strong></span>  <span class="tag">&lt;/security&gt;</span>
<span class="line-numbers">21</span><span class="tag">&lt;/project&gt;</span>
</span></code></pre>

	<p>This checks that the user is in the role, and if so the user can do a force build. All other permissions are denied at the server level.</p>


	<a name="Audit-Logging"></a>
<h2 >Audit Logging<a href="#Audit-Logging" class="wiki-anchor">&para;</a></h2>


	<p>The final step once more is the auditing. Since this is very simple, I've just added the default audit logger block:</p>


<pre><code class="xml syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="tag">&lt;internalSecurity&gt;</span>
<span class="line-numbers"> 2</span>  <span class="tag">&lt;audit&gt;</span>
<span class="line-numbers"> 3</span>    <span class="tag">&lt;xmlFileAudit</span><span class="tag">/&gt;</span>
<span class="line-numbers"> 4</span>  <span class="tag">&lt;/audit&gt;</span>
<span class="line-numbers"> 5</span>  <span class="tag">&lt;auditReader</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xmlFileAuditReader</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 6</span>  <span class="tag">&lt;users&gt;</span>
<span class="line-numbers"> 7</span>    <span class="comment">&lt;!-- Omitted for brevity --&gt;</span>
<span class="line-numbers"> 8</span>  <span class="tag">&lt;/users&gt;</span>
<span class="line-numbers"> 9</span>  <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers"><strong>10</strong></span>    <span class="comment">&lt;!-- Omitted for brevity --&gt;</span>
<span class="line-numbers">11</span>  <span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers">12</span><span class="tag">&lt;/internalSecurity&gt;</span>
</span></code></pre>

	<p>And that's the security settings for this scenario - the full example :</p>


<pre><code class="xml syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="tag">&lt;cruisecontrol&gt;</span>
<span class="line-numbers"> 2</span>  <span class="tag">&lt;internalSecurity&gt;</span>
<span class="line-numbers"> 3</span>    <span class="tag">&lt;users&gt;</span>
<span class="line-numbers"> 4</span>      <span class="tag">&lt;passwordUser</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">petros</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">whoareyou</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;/users&gt;</span>
<span class="line-numbers"> 6</span>    <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers"> 7</span>      <span class="tag">&lt;rolePermission</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">defaultRight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Deny</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">forceBuild</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Allow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 8</span>        <span class="tag">&lt;users&gt;</span>
<span class="line-numbers"> 9</span>          <span class="tag">&lt;userName</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">petros</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"><strong>10</strong></span>        <span class="tag">&lt;/users&gt;</span>
<span class="line-numbers">11</span>      <span class="tag">&lt;/rolePermission&gt;</span>
<span class="line-numbers">12</span>    <span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers">13</span>  <span class="tag">&lt;/internalSecurity&gt;</span>
<span class="line-numbers">14</span>  <span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Open_Source(Build)</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">15</span>    <span class="tag">&lt;workingDirectory&gt;</span>C:\Build\OSB<span class="tag">&lt;/workingDirectory&gt;</span>
<span class="line-numbers">16</span>    <span class="tag">&lt;artifactDirectory&gt;</span>C:\Build\OSB\Deploy<span class="tag">&lt;/artifactDirectory&gt;</span>
<span class="line-numbers">17</span>    <span class="tag">&lt;webURL&gt;</span>http://localhost/server/local/project/LAS-Main/ViewProjectReport.aspx<span class="tag">&lt;/webURL&gt;</span>
<span class="line-numbers">18</span>    <span class="comment">&lt;!-- Source control block defined here --&gt;</span>
<span class="line-numbers">19</span>    <span class="tag">&lt;triggers&gt;</span>
<span class="line-numbers"><strong>20</strong></span>      <span class="tag">&lt;intervalTrigger</span> <span class="attribute-name">buildCondition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">IfModificationExists</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">seconds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">300</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">21</span>    <span class="tag">&lt;/triggers&gt;</span>
<span class="line-numbers">22</span>    <span class="tag">&lt;tasks&gt;</span>
<span class="line-numbers">23</span>      <span class="comment">&lt;!-- Tasks defined here --&gt;</span>
<span class="line-numbers">24</span>    <span class="tag">&lt;/tasks&gt;</span>
<span class="line-numbers">25</span>    <span class="tag">&lt;publishers&gt;</span>
<span class="line-numbers">26</span>      <span class="comment">&lt;!-- Publishers defined here --&gt;</span>
<span class="line-numbers">27</span>      <span class="tag">&lt;xmllogger</span><span class="tag">/&gt;</span>
<span class="line-numbers">28</span>    <span class="tag">&lt;/publishers&gt;</span>
<span class="line-numbers">29</span>    <span class="tag">&lt;security</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultProjectSecurity</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><strong>30</strong></span>      <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers">31</span>        <span class="tag">&lt;rolePermission</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">32</span>      <span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers">33</span>    <span class="tag">&lt;/security&gt;</span>
<span class="line-numbers">34</span>  <span class="tag">&lt;/project&gt;</span>
<span class="line-numbers">35</span>  <span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Open_Source(Deploy)</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">36</span>    <span class="tag">&lt;workingDirectory&gt;</span>C:\Build\OSD<span class="tag">&lt;/workingDirectory&gt;</span>
<span class="line-numbers">37</span>    <span class="tag">&lt;artifactDirectory&gt;</span>C:\Build\OSD\Deploy<span class="tag">&lt;/artifactDirectory&gt;</span>
<span class="line-numbers">38</span>    <span class="tag">&lt;webURL&gt;</span>http://localhost/server/local/project/LAS-Main/ViewProjectReport.aspx<span class="tag">&lt;/webURL&gt;</span>
<span class="line-numbers">39</span>    <span class="comment">&lt;!-- Source control block defined here --&gt;</span>
<span class="line-numbers"><strong>40</strong></span>    <span class="tag">&lt;triggers</span> <span class="tag">/&gt;</span>
<span class="line-numbers">41</span>    <span class="tag">&lt;tasks&gt;</span>
<span class="line-numbers">42</span>      <span class="comment">&lt;!-- Tasks defined here --&gt;</span>
<span class="line-numbers">43</span>    <span class="tag">&lt;/tasks&gt;</span>
<span class="line-numbers">44</span>    <span class="tag">&lt;publishers&gt;</span>
<span class="line-numbers">45</span>      <span class="comment">&lt;!-- Publishers defined here --&gt;</span>
<span class="line-numbers">46</span>      <span class="tag">&lt;xmllogger</span><span class="tag">/&gt;</span>
<span class="line-numbers">47</span>    <span class="tag">&lt;/publishers&gt;</span>
<span class="line-numbers">48</span>    <span class="tag">&lt;security</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultProjectSecurity</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">49</span>      <span class="tag">&lt;permissions&gt;</span>
<span class="line-numbers"><strong>50</strong></span>        <span class="tag">&lt;rolePermission</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">51</span>      <span class="tag">&lt;/permissions&gt;</span>
<span class="line-numbers">52</span>    <span class="tag">&lt;/security&gt;</span>
<span class="line-numbers">53</span>  <span class="tag">&lt;/project&gt;</span>
<span class="line-numbers">54</span><span class="tag">&lt;/cruisecontrol&gt;</span>
</span></code></pre>

	<a name="Credits"></a>
<h2 >Credits<a href="#Credits" class="wiki-anchor">&para;</a></h2>


	<p>This scenario was originally posted on <a href="http://csut017.wordpress.com/" class="external">Automated Coder</a></p>
</div>














      
      <div style="clear:both;">&nbsp;</div>
    </div>
  </div>

  <div id="footer">
    <div class="bgl"><div class="bgr">
        Powered by <a href="https://www.chiliproject.org/">ChiliProject</a>
      </div></div>
  </div>

  <div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
  <div id="dialog-window" style="display:none;"></div>

</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-371146-15']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>

<!-- Mirrored from www.cruisecontrolnet.org/projects/ccnet/wiki/Scenario_3_Open_Source_Project by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 26 May 2014 07:54:04 GMT -->
</html>
