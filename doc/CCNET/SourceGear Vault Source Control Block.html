<html>
    <head>
        <title>CruiseControl.NET : SourceGear Vault Source Control Block</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            CruiseControl.NET : SourceGear Vault Source Control Block
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 27, 2005 by <font color="#0050B2">orogers</font>.
				    </div>

				    <p class="paragraph"><h3 style="margin: 4px 0px 4px 0px;" class="heading3"><a name="SourceGearVaultSourceControlBlock-SourceGearVaultConfigurationExample"> SourceGear Vault Configuration Example</a></h3>
For Visual Source Safe you must specify the executable, project, username and password. You may also specify the SSDIR. If SSDIR is not set the default or the SSDIR environment variable will be used.</p><div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;sourcecontrol type=<span class="xml&#45;quote">&quot;vault&quot;</span>&gt;</span>&#10;           <span class="xml&#45;tag">&lt;executable&gt;</span>c:&#92;program files&#92;sourcegear&#92;vault client&#92;vault.exe<span class="xml&#45;tag">&lt;/executable&gt;</span>&#10;           <span class="xml&#45;tag">&lt;username&gt;</span>my&#95;username<span class="xml&#45;tag">&lt;/username&gt;</span>&#10;            <span class="xml&#45;tag">&lt;password&gt;</span>my&#95;password<span class="xml&#45;tag">&lt;/password&gt;</span>&#10;            <span class="xml&#45;tag">&lt;host&gt;</span>my&#95;buildserver<span class="xml&#45;tag">&lt;/host&gt;</span>&#10;            <span class="xml&#45;tag">&lt;repository&gt;</span>my&#95;repository<span class="xml&#45;tag">&lt;/repository&gt;</span>&#10;            <span class="xml&#45;tag">&lt;folder&gt;</span>$<span class="xml&#45;tag">&lt;/folder&gt;</span>&#10;	    <span class="xml&#45;tag">&lt;ssl&gt;</span>True<span class="xml&#45;tag">&lt;/ssl&gt;</span>&#10;<span class="xml&#45;tag">&lt;/sourcecontrol&gt;</span></pre>
</div></div><p class="paragraph"><h3 class="heading3"><a name="SourceGearVaultSourceControlBlock-ConfigurationElements%3A"> Configuration Elements:</a></h3></p><table class="wikitable">
<tr>
<th> Node </th><th> Description </th><th> Type </th><th> Required</th>
</tr><tr>
<td> executable </td><td> The location of the vault command-line executable </td><td> string </td><td> true </td>
</tr><tr>
<td> username</td><td> Vault user id that CCNet should use to authenticate </td><td> string </td><td> true </td>
</tr><tr>
<td> password </td><td> Password for the Vault user </td><td> string </td><td> true</td>
</tr><tr>
<td> host </td><td> The name of the Vault server </td><td> string </td><td> true </td>
</tr><tr>
<td> repository </td><td> The name of the Vault repository to monitor. </td><td> string </td><td> true </td>
</tr><tr>
<td> folder </td><td> The root folder to be monitored by CCNet </td><td> string </td><td> true </td>
</tr><tr>
<td> ssl </td><td> Should SSL be used to communicate with the Vault server.  (Default value is false) </td><td> bool </td><td> false </td>
</tr><tr>
<td> timeout </td><td> How long (in milliseconds) the operation will be permitted to run before timing out.  The default value is 10 minutes. </td><td> int </td><td> false </td>
</tr>
</table>
<h3 class="heading3"><a name="SourceGearVaultSourceControlBlock-GettingthelatestsourcefromVault"> Getting the latest source from Vault</a></h3><p class="paragraph"><a href="http://dotnet.org.za/armand/archive/2004/06/20/2228.aspx" title="Visit page outside Confluence">armand </a> has posted a copy of the NAnt bootstrap file on his blog.  You will need to use a NAnt bootstrap file until CCNet supports automatically getting the source from Vault.</p><h3 class="heading3"><a name="SourceGearVaultSourceControlBlock-FilteringoutLabelChanges"> Filtering out Label Changes</a></h3><p class="paragraph">Vault interprets new labels as changes, so if you apply a label as part of your build process, this will kick off another build. To get around this, use a <a href="Filtered Source Control Block.html" title="Filtered Source Control Block">Filtered Source Control Block</a>.</p><h3 class="heading3"><a name="SourceGearVaultSourceControlBlock-ProblemswithCCServiceandVault3.0.2"> Problems with CCService and Vault 3.0.2+</a></h3>
If you are experiencing problems detecting modifications using CCService after upgrading to Vault 3.0.2, it may be related to the enhanced security features of the Vault server.  You should try the following process to fix this issue:
<ul class="star">
<li>  reinstall the Vault Server to have the IIS Process Model run as System (ie. not Machine)</li>
<li> change the CCService to run as an actual user, not as LocalSystem.</li>
</ul><br/>
Code contributed by Ryan Duffield.

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Apr 04, 2005 11:56</font></td>
		    </tr>
	    </table>
    </body>
</html>